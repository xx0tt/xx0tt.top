(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6094f1d0"],{"09d7":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mybutton"},[n("el-button",{class:{disabled:e.disabled},style:e.btnStyle,attrs:{disabled:e.disabled,type:"primary",icon:e.icon},on:{click:e.clickFn}},[e._t("lastIcon"),e._t("default"),e._t("rightIcon")],2)],1)},a=[],s={name:"MyButton",data:function(){return{}},props:{icon:{type:String},btnStyle:{type:Object},disabled:{type:Boolean,default:!1}},created:function(){},methods:{clickFn:function(){this.$emit("click")}},computed:{}},r=s,i=(n("95a8"),n("2877")),d=Object(i["a"])(r,o,a,!1,null,"40b17dc2",null);t["a"]=d.exports},"0eb5":function(e,t,n){"use strict";n("0ecc")},"0ecc":function(e,t,n){},"0f32":function(e,t,n){},"15d8":function(e,t,n){},"1f99":function(e,t,n){},"3c64":function(e,t,n){},"3d7a":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.listIsShow?e._e():n("div",{staticClass:"total"},[!1===e.lastDisabled||!1===e.rightDisabled?[n("span",[e._v("共"+e._s(e.taskList.totalCount)+"条数据 第"+e._s(e.taskList.pageIndex)+"/ "+e._s(Math.ceil(e.taskList.totalCount/10))+"页")]),n("div",{staticClass:"page-button"},[n("MyButton",{attrs:{btnStyle:e.pageBtnStyle,disabled:e.lastDisabled},on:{click:e.lastPage}},[e._v("上一页 ")]),n("MyButton",{attrs:{btnStyle:e.pageBtnStyle,disabled:e.rightDisabled},on:{click:e.nextPage}},[e._v("下一页 ")])],1)]:e._e()],2)},a=[],s=n("09d7"),r={name:"FooterPage",data:function(){return{pageBtnStyle:{background:"#d5ddf8",width:"70px",height:"32px",color:"#000",fontWeight:"400",marginLeft:"25px"}}},props:{listIsShow:{type:Boolean},taskList:{type:Object},lastDisabled:{type:Boolean},rightDisabled:{type:Boolean}},created:function(){},methods:{lastPage:function(){this.$emit("lastPage")},nextPage:function(){this.$emit("nextPage")}},computed:{},components:{MyButton:s["a"]}},i=r,d=(n("0eb5"),n("2877")),l=Object(d["a"])(i,o,a,!1,null,"1154a776",null);t["a"]=l.exports},"4c68":function(e,t,n){"use strict";n("1f99")},"4ff3":function(e,t,n){"use strict";n("3c64")},"5c57":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:e.lastInpTitle+":"}},[n("el-input",{ref:"lastInput",attrs:{placeholder:"请输入",clearable:""},model:{value:e.taskCode,callback:function(t){e.taskCode=t},expression:"taskCode"}})],1),e.rightInpTitle?n("el-form-item",{attrs:{label:e.rightInpTitle+":"}},[n("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.typeList,(function(e){return n("el-option",{key:e.statusId,attrs:{label:e.statusName,value:e.statusId}})})),1)],1):e._e(),n("el-form-item",[n("MyButton",{attrs:{icon:"el-icon-search",btnStyle:e.searchButStyle},on:{click:e.searchBtnFn}},[e._v(" 查询 ")])],1)],1)],1)},a=[],s=n("09d7"),r={name:"SearchBar",data:function(){return{taskCode:"",status:"",searchButStyle:{background:"#5f84ff"}}},props:{lastInpTitle:{type:String},rightInpTitle:{type:String},typeList:{type:Array}},created:function(){},methods:{searchBtnFn:function(){this.$emit("search",this.taskCode,this.status)}},computed:{},components:{MyButton:s["a"]}},i=r,d=(n("4ff3"),n("2877")),l=Object(d["a"])(i,o,a,!1,null,"3cb6acbc",null);t["a"]=l.exports},"5ce7":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("SerchBar",{attrs:{lastInpTitle:"点位搜索",rightInpTitle:"区域搜索",typeList:e.typeList},on:{search:e.searchFn}}),n("div",{staticClass:"result"},[n("div",{staticClass:"btn-title"},[n("MyButton",{attrs:{icon:"el-icon-circle-plus-outline",btnStyle:e.addBtnStyle},on:{click:e.addDialogFn}},[e._v("新建 ")]),n("AddNode",{ref:"addNode",attrs:{AddNodeIsShow:e.AddNodeIsShow,title:e.title,typeList:e.typeList},on:{"update:AddNodeIsShow":function(t){e.AddNodeIsShow=t},"update:add-node-is-show":function(t){e.AddNodeIsShow=t},"update:title":function(t){e.title=t}}})],1),n("NodeList",{attrs:{List:e.nodeAllList},on:{setInfo:e.setInfo}})],1),e.nodeAllList.currentPageRecords&&e.nodeAllList.currentPageRecords[0]?n("FooterPage",{attrs:{taskList:e.nodeAllList,lastDisabled:e.lastDisabled,rightDisabled:e.rightDisabled},on:{lastPage:e.lastPage,nextPage:e.nextPage}}):e._e()],1)},a=[],s=n("5530"),r=n("c7eb"),i=n("1da1"),d=(n("d3b7"),n("159b"),n("b0c0"),n("09d7")),l=n("5c57"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.List.currentPageRecords,height:e.List.currentPageRecords&&e.List.currentPageRecords[0]?"528":"120",stripe:"","empty-text":"暂无数据"}},[n("el-table-column",{attrs:{label:"序号",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+1+10*(e.List.pageIndex-1)))])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"点位名称"}}),n("el-table-column",{attrs:{prop:"region.name",label:"所在名称"}}),n("el-table-column",{attrs:{prop:"businessType.name",label:"商圈类型"}}),n("el-table-column",{attrs:{prop:"ownerName",label:"合作商"}}),n("el-table-column",{attrs:{prop:"addr",formatter:e.formatter,label:"详细地址"}}),n("el-table-column",{attrs:{prop:"taskId",label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"col-text col-get",on:{click:function(n){return e.getInfo(t.row)}}},[e._v(" 查看详情 ")]),n("span",{staticClass:"col-text col-set",on:{click:function(n){return e.setInfo(t.row)}}},[e._v(" 修改 ")]),n("span",{staticClass:"col-text col-remove",on:{click:function(n){return e.removeNode(t.row)}}},[e._v(" 删除 ")])]}}])})],1),n("InfoDialog",{attrs:{infoIsShow:e.infoIsShow,rowInfo:e.rowInfo},on:{"update:infoIsShow":function(t){e.infoIsShow=t},"update:info-is-show":function(t){e.infoIsShow=t}}})],1)},u=[],f=(n("ac1f"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{title:"点位详情",businessIsShow:e.infoIsShow,twoBtn:!1},on:{close:e.closeFn}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.infoList,height:e.infoList[0]?"528":"120",stripe:"","empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"pageIndex",label:"序号",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{prop:"innerCode",label:"机器编号"}}),n("el-table-column",{attrs:{prop:"vmStatus",label:"设备状态"}}),n("el-table-column",{attrs:{prop:"lastSupplyTime",label:"最后一次供货时间"}})],1)],1)}),p=[],b=n("9039"),h=n("0f66"),m={name:"InfoDialog",data:function(){return{infoList:[],loading:!1}},created:function(){},methods:{getInfo:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["c"])(e.rowInfo.id);case 2:e.infoList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},closeFn:function(){this.$emit("update:infoIsShow",!1)}},computed:{},props:{infoIsShow:{type:Boolean,default:!1},rowInfo:{type:Object,required:!0}},watch:{rowInfo:function(){this.getInfo()}},components:{Dialog:b["a"]}},g=m,I=(n("6169"),n("2877")),w=Object(I["a"])(g,f,p,!1,null,"d1604790",null),y=w.exports,v={name:"RegionList",data:function(){return{infoIsShow:!1,rowInfo:{}}},created:function(){},methods:{setInfo:function(e){this.$emit("setInfo",e)},removeNode:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var o;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$confirm("此操作将永久删除该点位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"});case 3:return n.next=5,Object(h["f"])(e.id);case 5:t.$message.success("删除成功"),n.next=14;break;case 8:if(n.prev=8,n.t0=n["catch"](0),console.log(n.t0),"cancel"!==n.t0){n.next=13;break}return n.abrupt("return");case 13:null!==n.t0&&void 0!==n.t0&&null!==(o=n.t0.response)&&void 0!==o&&o.data?t.$message.error(n.t0.response.data):t.$message.error("该点位不允许删除");case 14:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getInfo:function(e){this.infoIsShow=!0,this.rowInfo=e},formatter:function(e,t,n){return n.split("-")[3]}},computed:{},props:{List:{type:Object,required:!0}},components:{InfoDialog:y}},S=v,N=(n("696d"),Object(I["a"])(S,c,u,!1,null,"aa2f07e4",null)),x=N.exports,_=n("3d7a"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Dialog",{attrs:{businessIsShow:e.AddNodeIsShow,title:e.title},on:{close:e.closeFn,cancelBtn:e.closeFn,open:e.openFn,sureBtn:e.sureBtn}},[n("el-form",{ref:"ruleForm",attrs:{model:e.addNodeRequire,rules:e.rules,"label-position":"right","label-width":"auto"}},[n("el-form-item",{attrs:{label:"设备编号:",prop:"name"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"15","show-word-limit":""},model:{value:e.addNodeRequire.name,callback:function(t){e.$set(e.addNodeRequire,"name",t)},expression:"addNodeRequire.name"}})],1),n("el-form-item",{attrs:{label:"所在区域:",prop:"regionId"}},[n("el-select",{attrs:{placeholder:"请选择","no-data-text":"暂无数据"},model:{value:e.addNodeRequire.regionId,callback:function(t){e.$set(e.addNodeRequire,"regionId",t)},expression:"addNodeRequire.regionId"}},e._l(e.typeList,(function(e){return n("el-option",{key:e.statusId,attrs:{label:e.statusName,value:e.statusId}})})),1)],1),n("el-form-item",{attrs:{label:"所属商圈:",prop:"businessId"}},[n("el-select",{attrs:{placeholder:"请选择","no-data-text":"暂无数据"},model:{value:e.addNodeRequire.businessId,callback:function(t){e.$set(e.addNodeRequire,"businessId",t)},expression:"addNodeRequire.businessId"}},e._l(e.BusinessTypeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"归属合作商:",prop:"ownerId",required:!0}},[n("el-select",{attrs:{placeholder:"请选择","no-data-text":"暂无数据"},model:{value:e.addNodeRequire.ownerId,callback:function(t){e.$set(e.addNodeRequire,"ownerId",t)},expression:"addNodeRequire.ownerId"}},e._l(e.partnerList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"详细地址:",required:!0}},[n("el-cascader",{attrs:{placeholder:"请选择",options:e.options},model:{value:e.addrTop,callback:function(t){e.addrTop=t},expression:"addrTop"}})],1),n("el-form-item",{attrs:{prop:"addr1"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入详细地址",maxlength:"60","show-word-limit":""},model:{value:e.addNodeRequire.addr1,callback:function(t){e.$set(e.addNodeRequire,"addr1",t)},expression:"addNodeRequire.addr1"}})],1)],1)],1)],1)},B=[],O=(n("7db0"),n("ef6c")),j=n("2f62"),L={name:"AddNode",data:function(){return{addNodeRequire:{name:"",addr:"",areaCode:0,createUserId:"",regionId:"",businessId:"",ownerId:"",ownerName:"",addr1:""},addrTop:[],mapAddr:"",rules:{name:[{required:!0,message:"请输入设备编号",trigger:"blur"}],regionId:[{required:!0,message:"请选择所在区域",trigger:"change"}],businessId:[{required:!0,message:"请选择所属商圈",trigger:"change"}],ownerId:[{required:!0,message:"请选择归属合作商",trigger:"change"}],addr:[{required:!0,message:"请选择详细地址",trigger:"blur"}]},options:O["regionData"],BusinessTypeList:[],partnerList:[]}},created:function(){},methods:Object(s["a"])(Object(s["a"])({sureBtn:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.ruleForm.validate();case 3:if(e.addNodeRequire.createUserId=e.userInfo.userId,e.mapAddr=e.addNodeRequire.addr1,e.addNodeRequire.addr=O["CodeToText"][e.addrTop[0]]+"-"+O["CodeToText"][e.addrTop[1]]+"-"+O["CodeToText"][e.addrTop[2]]+"-"+e.addNodeRequire.addr,e.addNodeRequire.areaCode=e.addrTop[2],"新增点位"!==e.title){t.next=15;break}return n=e.partnerList.find((function(t){return t.id===e.addNodeRequire.ownerId})),e.addNodeRequire.ownerName=n.name,t.next=12,Object(h["a"])(e.addNodeRequire);case 12:e.$message.success("发布成功"),t.next=18;break;case 15:return t.next=17,Object(h["g"])(e.addNodeRequire);case 17:e.$message.success("修改成功");case 18:e.SET_PAGE_INDEX(),e.getNodeList(e.nodeSearchCondition),e.closeFn(),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),null!==(o=t.t0.response)&&void 0!==o&&o.status&&(e.addNodeRequire.addr1=e.mapAddr,e.$message.error(t.t0.response.data));case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},openFn:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.BusinessTypeList[0]){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(h["b"])();case 4:return e.BusinessTypeList=t.sent,t.next=7,Object(h["d"])({pageSize:1e4});case 7:e.partnerList=t.sent.currentPageRecords;case 8:case"end":return t.stop()}}),t)})))()},setNodeInfo:function(e){this.addNodeRequire.name=e.name,this.addNodeRequire.regionId=e.regionId,this.addNodeRequire.businessId=e.businessId,this.addNodeRequire.ownerId=e.ownerId,this.addNodeRequire.id=e.id;var t=e.addr.split("-");if(4===t.length){this.addNodeRequire.addr1=t[3];var n=[];n.push(O["TextToCode"][t[0]].code),n.push(O["TextToCode"][t[0]][t[1]].code),n.push(O["TextToCode"][t[0]][t[1]][t[2]].code),this.addrTop=n}else t[1]&&(this.addNodeRequire.addr1=t[1])},closeFn:function(){this.$emit("update:AddNodeIsShow",!1),this.addNodeRequire={name:"",addr:"",areaCode:0,createUserId:"",regionId:"",businessId:"",ownerId:"",ownerName:""},this.addrTop=[],this.$refs.ruleForm.resetFields(),this.$emit("update:title","新增点位")}},Object(j["b"])("node",["getNodeList"])),Object(j["d"])("node",["SET_PAGE_INDEX"])),computed:Object(s["a"])(Object(s["a"])({},Object(j["e"])("user",["userInfo"])),Object(j["e"])("node",["nodeSearchCondition"])),props:{AddNodeIsShow:{type:Boolean,default:!1},title:{type:String,default:"新增点位"},typeList:{type:Array,required:!0}},components:{Dialog:b["a"]}},q=L,R=(n("98d0"),Object(I["a"])(q,k,B,!1,null,"adaa6424",null)),T=R.exports,$=n("274d"),D={name:"Node",data:function(){return{addBtnStyle:{background:"linear-gradient(135deg,#ff9743,#ff5e20)"},AddNodeIsShow:!1,title:"新增点位",typeList:[]}},created:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getNodeList(e.nodeSearchCondition),t.next=3,Object($["b"])({pageSize:1e4});case 3:n=t.sent,n.currentPageRecords.forEach((function(t){var n={statusName:t.name,statusId:t.id};e.typeList.push(n)}));case 5:case"end":return t.stop()}}),t)})))()},methods:Object(s["a"])(Object(s["a"])({setInfo:function(e){this.AddNodeIsShow=!0,this.title="修改点位",this.$refs.addNode.setNodeInfo(e)},addDialogFn:function(){this.AddNodeIsShow=!0},lastPage:function(){this.SET_PAGE_INDEX(-1),this.getNodeList(this.nodeSearchCondition)},nextPage:function(){this.SET_PAGE_INDEX(1),this.getNodeList(this.nodeSearchCondition)},searchFn:function(e,t){this.SET_NAME_AND_REGIONID([e,t]),this.getNodeList(this.nodeSearchCondition)}},Object(j["b"])("node",["getNodeList"])),Object(j["d"])("node",["SET_NAME_AND_REGIONID","SET_PAGE_INDEX"])),computed:Object(s["a"])(Object(s["a"])({},Object(j["e"])("node",["nodeSearchCondition","nodeAllList","loading"])),Object(j["c"])("node",["lastDisabled","rightDisabled"])),components:{SerchBar:l["a"],MyButton:d["a"],NodeList:x,FooterPage:_["a"],AddNode:T}},C=D,A=(n("a3b4"),Object(I["a"])(C,o,a,!1,null,"10e517b0",null));t["default"]=A.exports},6169:function(e,t,n){"use strict";n("0f32")},"696d":function(e,t,n){"use strict";n("c125")},9039:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.isShow,width:e.width,"destroy-on-close":e.isDestroy},on:{"update:visible":function(t){e.isShow=t},close:e.close,open:e.open}},[e._t("default"),e.isInfoDialog?n("div",{staticClass:"bottom-btn"},[n("MyButton",{attrs:{btnStyle:e.infoStyle},on:{click:e.infoBtn}},[e._v("重新创建")])],1):e._e(),e.removeDialog?n("div",{staticClass:"bottom-btn"},[n("MyButton",{attrs:{btnStyle:e.infoStyle},on:{click:e.removeBtn}},[e._v("取消工单")])],1):e._e(),e.twoBtn?n("div",{staticClass:"bottom-btn"},[n("MyButton",{attrs:{btnStyle:e.cancelStyle},on:{click:e.cancelBtn}},[e._v("取 消 ")]),n("MyButton",{attrs:{btnStyle:e.sureStyle},on:{click:e.sureBtn}},[e._v("确 定 ")])],1):e._e()],2)},a=[],s=n("09d7"),r={name:"Dialog",data:function(){return{isShow:"",cancelStyle:{background:"#fbf4f0",color:"#655b56"},sureStyle:{background:"linear-gradient(135deg,#ff9743,#ff5e20)",color:"#fff",marginLeft:"24px"},infoStyle:{background:"#fbf4f0",color:"#655b56"}}},props:{businessIsShow:{typeof:Boolean,default:!1},title:{typeof:String},isInfoDialog:{type:Boolean,default:!1},twoBtn:{type:Boolean,default:!0},removeDialog:{type:Boolean,default:!1},isDestroy:{type:Boolean,default:!1},width:{typeof:String,default:"630px"}},created:function(){},methods:{cancelBtn:function(){this.$emit("cancelBtn")},sureBtn:function(){this.$emit("sureBtn")},open:function(){this.$emit("open")},close:function(){this.$emit("close")},infoBtn:function(){this.$emit("infoBtn")},removeBtn:function(){this.$emit("removeBtn")}},computed:{},watch:{businessIsShow:{immediate:!0,handler:function(){this.isShow=this.businessIsShow}}},components:{MyButton:s["a"]}},i=r,d=(n("4c68"),n("2877")),l=Object(d["a"])(i,o,a,!1,null,"023d4138",null);t["a"]=l.exports},"95a8":function(e,t,n){"use strict";n("15d8")},"98d0":function(e,t,n){"use strict";n("ff30")},a3b4:function(e,t,n){"use strict";n("e025")},c125:function(e,t,n){},e025:function(e,t,n){},ff30:function(e,t,n){}}]);