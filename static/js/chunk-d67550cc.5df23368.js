(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d67550cc"],{"09d7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mybutton"},[a("el-button",{class:{disabled:e.disabled},style:e.btnStyle,attrs:{disabled:e.disabled,type:"primary",icon:e.icon},on:{click:e.clickFn}},[e._t("lastIcon"),e._t("default"),e._t("rightIcon")],2)],1)},s=[],r={name:"MyButton",data:function(){return{}},props:{icon:{type:String},btnStyle:{type:Object},disabled:{type:Boolean,default:!1}},created:function(){},methods:{clickFn:function(){this.$emit("click")}},computed:{}},i=r,o=(a("95a8"),a("2877")),l=Object(o["a"])(i,n,s,!1,null,"40b17dc2",null);t["a"]=l.exports},"0eb5":function(e,t,a){"use strict";a("0ecc")},"0ecc":function(e,t,a){},"15d8":function(e,t,a){},"1f99":function(e,t,a){},"279d":function(e,t,a){},"32a8":function(e,t,a){"use strict";a("777b")},"3c64":function(e,t,a){},"3d7a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.listIsShow?e._e():a("div",{staticClass:"total"},[!1===e.lastDisabled||!1===e.rightDisabled?[a("span",[e._v("共"+e._s(e.taskList.totalCount)+"条数据 第"+e._s(e.taskList.pageIndex)+"/ "+e._s(Math.ceil(e.taskList.totalCount/10))+"页")]),a("div",{staticClass:"page-button"},[a("MyButton",{attrs:{btnStyle:e.pageBtnStyle,disabled:e.lastDisabled},on:{click:e.lastPage}},[e._v("上一页 ")]),a("MyButton",{attrs:{btnStyle:e.pageBtnStyle,disabled:e.rightDisabled},on:{click:e.nextPage}},[e._v("下一页 ")])],1)]:e._e()],2)},s=[],r=a("09d7"),i={name:"FooterPage",data:function(){return{pageBtnStyle:{background:"#d5ddf8",width:"70px",height:"32px",color:"#000",fontWeight:"400",marginLeft:"25px"}}},props:{listIsShow:{type:Boolean},taskList:{type:Object},lastDisabled:{type:Boolean},rightDisabled:{type:Boolean}},created:function(){},methods:{lastPage:function(){this.$emit("lastPage")},nextPage:function(){this.$emit("nextPage")}},computed:{},components:{MyButton:r["a"]}},o=i,l=(a("0eb5"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"1154a776",null);t["a"]=c.exports},"4c68":function(e,t,a){"use strict";a("1f99")},"4ff3":function(e,t,a){"use strict";a("3c64")},"5c57":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:e.lastInpTitle+":"}},[a("el-input",{ref:"lastInput",attrs:{placeholder:"请输入",clearable:""},model:{value:e.taskCode,callback:function(t){e.taskCode=t},expression:"taskCode"}})],1),e.rightInpTitle?a("el-form-item",{attrs:{label:e.rightInpTitle+":"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.statusId,attrs:{label:e.statusName,value:e.statusId}})})),1)],1):e._e(),a("el-form-item",[a("MyButton",{attrs:{icon:"el-icon-search",btnStyle:e.searchButStyle},on:{click:e.searchBtnFn}},[e._v(" 查询 ")])],1)],1)],1)},s=[],r=a("09d7"),i={name:"SearchBar",data:function(){return{taskCode:"",status:"",searchButStyle:{background:"#5f84ff"}}},props:{lastInpTitle:{type:String},rightInpTitle:{type:String},typeList:{type:Array}},created:function(){},methods:{searchBtnFn:function(){this.$emit("search",this.taskCode,this.status)}},computed:{},components:{MyButton:r["a"]}},o=i,l=(a("4ff3"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"3cb6acbc",null);t["a"]=c.exports},"5f72":function(e,t,a){"use strict";a("a8d0")},"777b":function(e,t,a){},9039:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.isShow,width:e.width,"destroy-on-close":e.isDestroy},on:{"update:visible":function(t){e.isShow=t},close:e.close,open:e.open}},[e._t("default"),e.isInfoDialog?a("div",{staticClass:"bottom-btn"},[a("MyButton",{attrs:{btnStyle:e.infoStyle},on:{click:e.infoBtn}},[e._v("重新创建")])],1):e._e(),e.removeDialog?a("div",{staticClass:"bottom-btn"},[a("MyButton",{attrs:{btnStyle:e.infoStyle},on:{click:e.removeBtn}},[e._v("取消工单")])],1):e._e(),e.twoBtn?a("div",{staticClass:"bottom-btn"},[a("MyButton",{attrs:{btnStyle:e.cancelStyle},on:{click:e.cancelBtn}},[e._v("取 消 ")]),a("MyButton",{attrs:{btnStyle:e.sureStyle},on:{click:e.sureBtn}},[e._v("确 定 ")])],1):e._e()],2)},s=[],r=a("09d7"),i={name:"Dialog",data:function(){return{isShow:"",cancelStyle:{background:"#fbf4f0",color:"#655b56"},sureStyle:{background:"linear-gradient(135deg,#ff9743,#ff5e20)",color:"#fff",marginLeft:"24px"},infoStyle:{background:"#fbf4f0",color:"#655b56"}}},props:{businessIsShow:{typeof:Boolean,default:!1},title:{typeof:String},isInfoDialog:{type:Boolean,default:!1},twoBtn:{type:Boolean,default:!0},removeDialog:{type:Boolean,default:!1},isDestroy:{type:Boolean,default:!1},width:{typeof:String,default:"630px"}},created:function(){},methods:{cancelBtn:function(){this.$emit("cancelBtn")},sureBtn:function(){this.$emit("sureBtn")},open:function(){this.$emit("open")},close:function(){this.$emit("close")},infoBtn:function(){this.$emit("infoBtn")},removeBtn:function(){this.$emit("removeBtn")}},computed:{},watch:{businessIsShow:{immediate:!0,handler:function(){this.isShow=this.businessIsShow}}},components:{MyButton:r["a"]}},o=i,l=(a("4c68"),a("2877")),c=Object(l["a"])(o,n,s,!1,null,"023d4138",null);t["a"]=c.exports},"95a8":function(e,t,a){"use strict";a("15d8")},a8d0:function(e,t,a){},c9e1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SearchBar",{attrs:{lastInpTitle:"型号搜索"},on:{search:e.onsearch}}),a("div",{staticClass:"result"},[a("div",{staticClass:"btn-title"},[a("MyButton",{attrs:{btnStyle:e.addBtnStyle,icon:"el-icon-circle-plus-outline"},on:{click:e.addVmServe}},[e._v(" 新建 ")])],1),a("vmDialog",{ref:"vmDialog",attrs:{businessIsShow:e.businessIsShow},on:{"update:businessIsShow":function(t){e.businessIsShow=t},"update:business-is-show":function(t){e.businessIsShow=t},addvmTypeSucc:e.getVmTypeList}}),a("vmTable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],on:{exitVmServe:e.exitVmServe,delVmServe:e.delVmServe}}),a("FooterPage",{attrs:{taskList:e.VmTypeList,lastDisabled:e.lastDisabled,rightDisabled:e.rightDisabled},on:{lastPage:e.lastPage,nextPage:e.nextPage}})],1)],1)},s=[],r=a("c7eb"),i=a("5530"),o=a("1da1"),l=a("5c57"),c=a("09d7"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.VmTypeList.currentPageRecords,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"型号名称"}}),a("el-table-column",{attrs:{prop:"model",label:"型号编码"}}),a("el-table-column",{attrs:{label:"设备图片"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index;return[a("el-avatar",{attrs:{size:24,src:e.VmTypeList.currentPageRecords[n].image}})]}}])}),a("el-table-column",{attrs:{prop:"vmRow",label:"货道行"}}),a("el-table-column",{attrs:{prop:"vmCol",label:"货道列"}}),a("el-table-column",{attrs:{prop:"channelMaxCapacity",label:"设备容量"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.$index;return[a("span",{staticClass:"tb-span",on:{click:function(t){return e.exitVmServe(n)}}},[e._v("修改")]),a("span",{staticClass:"tb-span del",on:{click:function(t){return e.delVmServe(n)}}},[e._v("删除")])]}}])})],1)},d=[],m=a("2f62"),p={computed:Object(i["a"])({},Object(m["e"])("vm",["VmTypeList"])),methods:{exitVmServe:function(e){var t=this.VmTypeList.currentPageRecords[e].typeId;this.$emit("exitVmServe",t)},delVmServe:function(e){var t=this.VmTypeList.currentPageRecords[e].typeId;this.$emit("delVmServe",t)}}},f=p,b=(a("32a8"),a("2877")),v=Object(b["a"])(f,u,d,!1,null,"1d493b9c",null),h=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Dialog",{attrs:{title:e.title,businessIsShow:e.businessIsShow},on:{close:e.onClose,cancelBtn:e.onClose,sureBtn:e.onSaveBtn}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"vm-status-dia"},[a("el-form",{ref:"form",attrs:{rules:e.addVmServeFormRules,model:e.addVmServeForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"型号名称:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.addVmServeForm.name,callback:function(t){e.$set(e.addVmServeForm,"name",t)},expression:"addVmServeForm.name"}})],1),a("el-form-item",{attrs:{label:"型号编码:",prop:"model"}},[a("el-input",{attrs:{placeholder:"请输入 (限制数字、字母、中划线、下划线)",maxlength:"15","show-word-limit":""},model:{value:e.addVmServeForm.model,callback:function(t){e.$set(e.addVmServeForm,"model",t)},expression:"addVmServeForm.model"}})],1),a("el-form-item",{attrs:{label:"货道行数:",prop:"vmRow"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",placeholder:"请输入",min:1,max:10},model:{value:e.addVmServeForm.vmRow,callback:function(t){e.$set(e.addVmServeForm,"vmRow",t)},expression:"addVmServeForm.vmRow"}})],1),a("el-form-item",{attrs:{label:"货道列数:",prop:"vmCol"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",placeholder:"请输入",min:1,max:10},model:{value:e.addVmServeForm.vmCol,callback:function(t){e.$set(e.addVmServeForm,"vmCol",t)},expression:"addVmServeForm.vmCol"}})],1),a("el-form-item",{attrs:{label:"货道容量:",prop:"channelMaxCapacity"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",placeholder:"请输入",min:1,max:10},model:{value:e.addVmServeForm.channelMaxCapacity,callback:function(t){e.$set(e.addVmServeForm,"channelMaxCapacity",t)},expression:"addVmServeForm.channelMaxCapacity"}})],1),a("el-form-item",{attrs:{label:"设备图片:",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.addVmServeForm.image?a("img",{staticClass:"avatar",attrs:{src:e.addVmServeForm.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",[e._v("支持扩展名：jpg、png，文件不得大于100kb")])],1)],1)],1)])},y=[],S=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("9039")),x=a("b775"),w=function(e){return Object(x["a"])({url:"/api/vm-service/vmType",method:"POST",data:e})},V=function(e){return Object(x["a"])({url:"/api/vm-service/vmType/"+e})},k=function(e){return Object(x["a"])({url:"/api/vm-service/vmType/"+e.typeId,method:"PUT",data:e})},B=function(e){return Object(x["a"])({url:"/api/vm-service/vmType/"+e,method:"DELETE"})},I={data:function(){return{addVmServeForm:{name:"",model:"",vmRow:0,vmCol:0,channelMaxCapacity:0,image:""},addVmServeFormRules:{name:[{required:!0,message:"请输入型号名称",trigger:"blur"}],model:[{required:!0,message:"请输入型号编码",trigger:"blur"},{pattern:/^[a-zA-Z0-9_-]{4,15}$/,message:"型号编码格式不正确",trigger:"blur"}],vmRow:[{required:!0,message:"请选择货道行数",trigger:"blur"}],vmCol:[{required:!0,message:"请选择货道列数",trigger:"blur"}],channelMaxCapacity:[{required:!0,message:"请选择货道容量",trigger:"blur"}],image:[{required:!0,message:"请上传图片",trigger:"change"}]},loading:!1}},components:{Dialog:S["a"]},props:["businessIsShow"],methods:{onSaveBtn:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$refs.form.validate();case 4:if(e.loading=!0,t.prev=5,!e.addVmServeForm.typeId){t.next=12;break}return t.next=9,k(e.addVmServeForm);case 9:e.$message.success("修改售货机类型成功"),t.next=15;break;case 12:return t.next=14,w(e.addVmServeForm);case 14:e.$message.success("新增售货机类型成功");case 15:e.$emit("addvmTypeSucc"),e.onClose(),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](5),e.$message.error("操作售货机类型失败");case 22:return t.prev=22,e.loading=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[5,19,22,25]])})))()},getvmTypeDeil:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,V(e);case 3:n=a.sent,t.addVmServeForm=n,t.loading=!1;case 6:case"end":return a.stop()}}),a)})))()},onClose:function(){this.addVmServeForm={},this.$refs.form.resetFields(),this.$emit("update:businessIsShow",!1)},handleAvatarSuccess:function(e,t){this.addVmServeForm.image=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024<100;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG  格式!"),a||this.$message.error("上传头像图片大小不能超过 100kb!"),t&&a}},computed:{title:function(){return this.addVmServeForm.typeId?"修改设备类型":"新增设备类型"}}},$=I,_=(a("f4b2"),Object(b["a"])($,g,y,!1,null,"45c2d839",null)),C=_.exports,T=a("3d7a"),F={name:"",data:function(){return{addBtnStyle:{background:"linear-gradient(135deg,#ff9743,#ff5e20)"},loading:!1,businessIsShow:!1,pageIndex:1}},created:function(){this.getVmTypeList()},components:{SearchBar:l["a"],vmTable:h,MyButton:c["a"],vmDialog:C,FooterPage:T["a"]},methods:{getVmTypeList:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.next=3,t.$store.dispatch("vm/getVmTypeList",Object(i["a"])({pageSize:10,pageIndex:t.pageIndex},e));case 3:t.loading=!1;case 4:case"end":return a.stop()}}),a)})))()},lastPage:function(){this.pageIndex-=1,this.getVmTypeList()},nextPage:function(){this.pageIndex+=1,this.getVmTypeList()},addVmServe:function(){this.businessIsShow=!0},onsearch:function(e){this.loading||this.getVmTypeList({name:e,pageIndex:1})},exitVmServe:function(e){this.$refs.vmDialog.getvmTypeDeil(e),this.businessIsShow=!0},delVmServe:function(e){var t=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n,s;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将删除该设备类型, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return a.prev=2,t.loading=!0,a.next=6,B(e);case 6:t.getVmTypeList(),n=t.$createElement,t.$notify({title:"提示",message:n("span",{style:"color: green"},"删除成功！")}),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](2),s=t.$createElement,t.$notify({title:"提示",message:s("span",{style:"color: #ff7c0f"},"该售货机类型在使用！")});case 15:return a.prev=15,t.loading=!1,a.finish(15);case 18:case"end":return a.stop()}}),a,null,[[2,11,15,18]])})))()}},computed:Object(i["a"])(Object(i["a"])({},Object(m["e"])("vm",["VmTypeList"])),{},{lastDisabled:function(){return this.VmTypeList.pageIndex<=1},rightDisabled:function(){return this.VmTypeList.pageIndex>=this.VmTypeList.totalPage}})},j=F,O=(a("5f72"),Object(b["a"])(j,n,s,!1,null,"5159757c",null));t["default"]=O.exports},f4b2:function(e,t,a){"use strict";a("279d")}}]);