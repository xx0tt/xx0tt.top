(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46271d3a"],{"0491":function(t,e,a){"use strict";a("bae4")},"09d7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mybutton"},[a("el-button",{class:{disabled:t.disabled},style:t.btnStyle,attrs:{disabled:t.disabled,type:"primary",icon:t.icon},on:{click:t.clickFn}},[t._t("lastIcon"),t._t("default"),t._t("rightIcon")],2)],1)},n=[],o={name:"MyButton",data:function(){return{}},props:{icon:{type:String},btnStyle:{type:Object},disabled:{type:Boolean,default:!1}},created:function(){},methods:{clickFn:function(){this.$emit("click")}},computed:{}},i=o,r=(a("95a8"),a("2877")),c=Object(r["a"])(i,s,n,!1,null,"40b17dc2",null);e["a"]=c.exports},"0eb5":function(t,e,a){"use strict";a("0ecc")},"0ecc":function(t,e,a){},1408:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADT0lEQVRIS62WX0hTcRTHv+d3V7MkKsVAbHdSLwWhkVEvBZVRL72UvURhRFQ09SpBqZPklrU5oayZkyD68xaYUFH0h5wP9dQfqCAqonST6ikjs2jr7p64103mNndndd8u58/n/M7vnN85BIvPPRwoY12rArAWwBIABXGTEQBvADwkYevzOFwvs7miqYRNobMVBPIBqLQKJi7vZ3Bju7P+WSb9NJDKqi0yXNAJwAWGyBEyrkbQwdRtl78cUknVkm0ngZpC3vmE/GsANkwLkK4cZPzY3u5s/poQTYDMk4QL7v0HSMJ30C6PbE6cbALUHPZ3gVH7jydJMacur7NOGc8qAPPiiR5P+06soiLozLzKKBAT1BzyP5hGdVm5HyPwXiapEKwHAPR7ncpGivfJCyvrXOREeCex2NrmrH3lDvk7GDhspk3Yyqk55D8GoDUXRxYNefunHts1r/TbaDRc2MPg/Un6xw1QEMD6vwYRdAKdnOn4on56ViwVLoheAfOOFH8DBugTgOK/AjFGdcHVPrn+hjp4KS8ixnoB3pLB12cD9AuAPSFkIEJADMDs7Kmi18ImbT1R4np75I1vjpQ36yYI66awiaSBSMJuTYs9kYR0FYyyjIaE67FZ+dUdRXu/q8OnC6I8445RxlkCM0GTUkeEPR5ZuawOqnlRqfAUAwfBnGhsnYhaPY46DwjsHuosZiHdB2OZRerN1KUWg06EfR5ZuWj22JB/GwgXxsuUdnocdXfMJv/cU0rR30b/Lc7hfgfIHT57nJmOpijrJMQBj6PWBLQM95RoIiL5ShrCxv+Roc6l0vhJFuYAARG3UeMHf7mQ8DzNwHzy4fI6lfPJMvfQuRUs9LtgFOUCMXT0GJYnnqD+TK82A0yEGq+s9Jgn+9i9RtditwDMzRUCIOh1KpXxRzVQAWhPKP7IJjsxYEJQPcfoPUjvtSr7SQEQdAFafVKue5o8Js6BUTONSK1VCd1eWTFHT+rgu/9Pz9Fk9IBdHtmUNvjMkg0F5hO0vv8AG2DYqtqdrvRRnggmvpycYYYr051ly1e8eAJ2x0hD1uUk2UlLuGulzmysW7kuKkFB1GhcfKZgptzrEspGn0k2rmKmNZkWSCJ+FNOoz7dIyTo8/wDHwkf9fxFtzQAAAABJRU5ErkJggg=="},"15d8":function(t,e,a){},"1f99":function(t,e,a){},"3c64":function(t,e,a){},"3d7a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.listIsShow?t._e():a("div",{staticClass:"total"},[!1===t.lastDisabled||!1===t.rightDisabled?[a("span",[t._v("共"+t._s(t.taskList.totalCount)+"条数据 第"+t._s(t.taskList.pageIndex)+"/ "+t._s(Math.ceil(t.taskList.totalCount/10))+"页")]),a("div",{staticClass:"page-button"},[a("MyButton",{attrs:{btnStyle:t.pageBtnStyle,disabled:t.lastDisabled},on:{click:t.lastPage}},[t._v("上一页 ")]),a("MyButton",{attrs:{btnStyle:t.pageBtnStyle,disabled:t.rightDisabled},on:{click:t.nextPage}},[t._v("下一页 ")])],1)]:t._e()],2)},n=[],o=a("09d7"),i={name:"FooterPage",data:function(){return{pageBtnStyle:{background:"#d5ddf8",width:"70px",height:"32px",color:"#000",fontWeight:"400",marginLeft:"25px"}}},props:{listIsShow:{type:Boolean},taskList:{type:Object},lastDisabled:{type:Boolean},rightDisabled:{type:Boolean}},created:function(){},methods:{lastPage:function(){this.$emit("lastPage")},nextPage:function(){this.$emit("nextPage")}},computed:{},components:{MyButton:o["a"]}},r=i,c=(a("0eb5"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"1154a776",null);e["a"]=l.exports},"4c68":function(t,e,a){"use strict";a("1f99")},"4ff3":function(t,e,a){"use strict";a("3c64")},"54e0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAABqUlEQVRIS72WvUrDUBTH/6cGMjq4qO0DOFgQSocbcBFUnDWvURQER+0oCEpfI+5ii12E3KEEBB18gEZdHNwMxBy5tQ39sr1JaDLmnv/93Xu+7iHM+SzL2gRwxMzbADYArPQlnwBeiegRwK3rui+ztqL/Fi3L2mLmSwB78w7TX28S0Znruk/T7CdAtm0vdbvdK2auEVFBE9IzY+aIiBqlUunUcZyfYe0IqFKpLJum6TDzbhLAuC0RtYIgsD3P+xqsxSB1E9/377JC4o2JWsVi8WBwsxgkhLgGcJzlJlO0N1LKE/W/B1KBj6LI04iJE4ZhTWkMw2gAsGcdTMWsUChUVIL0QEKIe53sCsNwrdPpfChNtVpdNQzjXcMDTSnlPqk6YeZnDQFSgkBEZQW6YOZzHRCARK4bSow6CSEeAOxogtKatRXIB7Cus4OUcqTuhBCsowPwpkDfAEwdQQZQkCsoN9dpJ0MG17UTpXdaEBHVExVsBlA5UQtKCfprQQmbqk4VxDYTTbXfWBf/TChQbg+fguXylA8cm8twMhzphY9b42klhCgT0WHWAfIXFPYBcBvJ9uQAAAAASUVORK5CYII="},"5c57":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:t.lastInpTitle+":"}},[a("el-input",{ref:"lastInput",attrs:{placeholder:"请输入",clearable:""},model:{value:t.taskCode,callback:function(e){t.taskCode=e},expression:"taskCode"}})],1),t.rightInpTitle?a("el-form-item",{attrs:{label:t.rightInpTitle+":"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:!0},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.typeList,(function(t){return a("el-option",{key:t.statusId,attrs:{label:t.statusName,value:t.statusId}})})),1)],1):t._e(),a("el-form-item",[a("MyButton",{attrs:{icon:"el-icon-search",btnStyle:t.searchButStyle},on:{click:t.searchBtnFn}},[t._v(" 查询 ")])],1)],1)],1)},n=[],o=a("09d7"),i={name:"SearchBar",data:function(){return{taskCode:"",status:"",searchButStyle:{background:"#5f84ff"}}},props:{lastInpTitle:{type:String},rightInpTitle:{type:String},typeList:{type:Array}},created:function(){},methods:{searchBtnFn:function(){this.$emit("search",this.taskCode,this.status)}},computed:{},components:{MyButton:o["a"]}},r=i,c=(a("4ff3"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"3cb6acbc",null);e["a"]=l.exports},"619b":function(t,e,a){t.exports=a.p+"static/img/gongdan.e8208e34.png"},"6c8c":function(t,e,a){},"8d2c":function(t,e,a){},9039:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.isShow,width:t.width,"destroy-on-close":t.isDestroy},on:{"update:visible":function(e){t.isShow=e},close:t.close,open:t.open}},[t._t("default"),t.isInfoDialog?a("div",{staticClass:"bottom-btn"},[a("MyButton",{attrs:{btnStyle:t.infoStyle},on:{click:t.infoBtn}},[t._v("重新创建")])],1):t._e(),t.removeDialog?a("div",{staticClass:"bottom-btn"},[a("MyButton",{attrs:{btnStyle:t.infoStyle},on:{click:t.removeBtn}},[t._v("取消工单")])],1):t._e(),t.twoBtn?a("div",{staticClass:"bottom-btn"},[a("MyButton",{attrs:{btnStyle:t.cancelStyle},on:{click:t.cancelBtn}},[t._v("取 消 ")]),a("MyButton",{attrs:{btnStyle:t.sureStyle},on:{click:t.sureBtn}},[t._v("确 定 ")])],1):t._e()],2)},n=[],o=a("09d7"),i={name:"Dialog",data:function(){return{isShow:"",cancelStyle:{background:"#fbf4f0",color:"#655b56"},sureStyle:{background:"linear-gradient(135deg,#ff9743,#ff5e20)",color:"#fff",marginLeft:"24px"},infoStyle:{background:"#fbf4f0",color:"#655b56"}}},props:{businessIsShow:{typeof:Boolean,default:!1},title:{typeof:String},isInfoDialog:{type:Boolean,default:!1},twoBtn:{type:Boolean,default:!0},removeDialog:{type:Boolean,default:!1},isDestroy:{type:Boolean,default:!1},width:{typeof:String,default:"630px"}},created:function(){},methods:{cancelBtn:function(){this.$emit("cancelBtn")},sureBtn:function(){this.$emit("sureBtn")},open:function(){this.$emit("open")},close:function(){this.$emit("close")},infoBtn:function(){this.$emit("infoBtn")},removeBtn:function(){this.$emit("removeBtn")}},computed:{},watch:{businessIsShow:{immediate:!0,handler:function(){this.isShow=this.businessIsShow}}},components:{MyButton:o["a"]}},r=i,c=(a("4c68"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"023d4138",null);e["a"]=l.exports},"933f":function(t,e,a){"use strict";a("6c8c")},"95a8":function(t,e,a){"use strict";a("15d8")},9729:function(t,e,a){"use strict";a("d189")},9893:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SearchBar",{attrs:{lastInpTitle:"工单编号",rightInpTitle:"工单状态",typeList:t.typeList},on:{search:t.searchFn}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"result"},[a("div",{staticClass:"btn-title"},[a("MyButton",{attrs:{icon:"el-icon-circle-plus-outline",btnStyle:t.addBtnStyle},on:{click:t.addDialogShow}},[t._v(" 新建 ")]),a("AddDialog",{attrs:{taskInfo:t.taskInfo}}),a("MyButton",{attrs:{btnStyle:t.businessBtnStyle},on:{click:t.businessDialogShow}},[t._v(" 工单配置 ")]),a("BusinessDialog")],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.currentPageRecords,height:t.currentPageRecords[0]?"528":"120",stripe:"","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{prop:"pageIndex",label:"序号",width:"60px"}}),a("el-table-column",{attrs:{prop:"taskCode",label:"工单编号"}}),a("el-table-column",{attrs:{prop:"innerCode",label:"设备编号"}}),a("el-table-column",{attrs:{prop:"typeName",label:"工单类型"}}),a("el-table-column",{attrs:{prop:"createType",label:"工单方式"}}),a("el-table-column",{attrs:{prop:"taskStatus",label:"工单状态"}}),a("el-table-column",{attrs:{prop:"userName",label:"运营人员"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期",width:"180px"}}),a("el-table-column",{attrs:{prop:"taskId",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"col-text",on:{click:function(a){return t.getTaskInfo(e.row)}}},[t._v("查看详情 ")])]}}])})],1),t.taskItem.taskId?a("InfoDialog",{attrs:{taskItem:t.taskItem},on:{againCreate:t.againCreate}}):t._e(),t.taskList.totalCount?a("FooterPage",{attrs:{listIsShow:t.listIsShow,taskList:t.taskList,lastDisabled:t.lastDisabled,rightDisabled:t.rightDisabled},on:{lastPage:t.getLastTaskService,nextPage:t.getNextTaskService}}):t._e()],1)],1)},n=[],o=a("c7eb"),i=a("1da1"),r=a("5530"),c=(a("d3b7"),a("159b"),a("09d7")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Dialog",{attrs:{businessIsShow:t.businessIsShow,title:"工单配置"},on:{businessUnShow:t.businessUnShow,sureBtn:t.sureBtnFn,cancelBtn:t.businessUnShow,open:t.supplyAlertValueFn,close:t.businessUnShow}},[a("div",{staticClass:"content"},[a("div",{staticClass:"text"},[t._v("补货警戒线：")]),a("el-input-number",{attrs:{"controls-position":"right",min:1,max:100,size:"small"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1)])},u=[],d=a("9039"),p=a("2f62"),f=a("b199"),h={name:"BusinessDialog",data:function(){return{num:""}},props:{},created:function(){},methods:Object(r["a"])({supplyAlertValueFn:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["e"])();case 3:t.num=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},sureBtnFn:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["i"])(t.num);case 3:t.$message.success("修改成功"),t.businessUnShow(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},businessUnShow:function(){this.setBusinessIsShow(!1)}},Object(p["b"])("task",["setBusinessIsShow"])),computed:Object(r["a"])({},Object(p["e"])("task",["businessIsShow"])),components:{Dialog:d["a"]}},b=h,m=(a("0491"),a("2877")),g=Object(m["a"])(b,l,u,!1,null,"df5ff35a",null),k=g.exports,I=a("5c57"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Dialog",{attrs:{businessIsShow:t.addDialogIsShow,title:"新增工单",isDestroy:!0},on:{close:t.addDialogUnShow,cancelBtn:t.addDialogUnShow,open:t.openFn,sureBtn:t.createService}},[a("div",{staticClass:"content"},[a("el-form",{ref:"ruleForm",attrs:{model:t.service,rules:t.rules,"label-position":"right","label-width":"auto"}},[a("el-form-item",{attrs:{label:"设备编号:",prop:"innerCode"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入",maxlength:"15","show-word-limit":""},on:{input:t.replenishment},model:{value:t.service.innerCode,callback:function(e){t.$set(t.service,"innerCode",e)},expression:"service.innerCode"}})],1),a("el-form-item",{attrs:{label:"工单类型:",prop:"productType"}},[a("el-select",{attrs:{placeholder:"请选择","no-data-text":"暂无数据"},model:{value:t.service.productType,callback:function(e){t.$set(t.service,"productType",e)},expression:"service.productType"}},t._l(t.allTaskType,(function(t){return a("el-option",{key:t.typeId,attrs:{label:t.typeName,value:t.typeId}})})),1)],1),a("el-form-item",{attrs:{label:"补货数量:"}},[a("span",{staticClass:"item-icon",on:{click:t.getChannel}},[a("i",{staticClass:"el-icon-s-order"}),t._v(" 补货清单 ")])]),a("el-form-item",{attrs:{label:"运营人员:",prop:"assignorId"}},[a("el-select",{attrs:{placeholder:"请选择","no-data-text":"暂无人员"},model:{value:t.service.assignorId,callback:function(e){t.$set(t.service,"assignorId",e)},expression:"service.assignorId"}},t._l(t.operatorList,(function(t){return a("el-option",{key:t.userId,attrs:{label:t.userName,value:t.userId}})})),1)],1),a("el-form-item",{attrs:{label:"备注:",prop:"desc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注(不超过40字)",maxlength:"40","show-word-limit":""},model:{value:t.service.desc,callback:function(e){t.$set(t.service,"desc",e)},expression:"service.desc"}})],1)],1)],1)]),a("ChannelDialog",{attrs:{ChannelList:t.ChannelList},on:{upDataService:t.upDataService}})],1)},w=[],S=(a("4de4"),a("498a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Dialog",{attrs:{title:"补货详情",businessIsShow:t.channelDialogIsShow},on:{close:t.closeFn,cancelBtn:t.closeFn,sureBtn:t.sureBtnFn}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ChannelList,height:"350","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{label:"货道编号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.channelCode)+" ")]}}])}),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sku&&e.row.sku.skuName||"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"当前数量",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sku?e.row.currentCapacity:"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"还可添加",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.sku?e.row.maxCapacity-e.row.currentCapacity:"-")+" ")]}}])}),a("el-table-column",{attrs:{label:"补满数量",width:"210"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sku?a("el-input-number",{attrs:{"controls-position":"right",min:0,max:e.row.maxCapacity},model:{value:e.row.currentCapacity,callback:function(a){t.$set(e.row,"currentCapacity",a)},expression:"scope.row.currentCapacity"}}):a("span",[t._v("货道暂无商品")])]}}])})],1)],1)}),y=[],D={name:"ChannelDialog",data:function(){return{}},created:function(){},methods:Object(r["a"])({closeFn:function(){this.setChannelDialogIsShow(!1)},sureBtnFn:function(){this.$emit("upDataService"),this.closeFn()}},Object(p["b"])("task",["setChannelDialogIsShow"])),computed:Object(r["a"])({},Object(p["e"])("task",["channelDialogIsShow"])),props:{ChannelList:{type:Array,required:!0}},watch:{},components:{Dialog:d["a"]}},B=D,x=Object(m["a"])(B,S,y,!1,null,"04f9fa3e",null),C=x.exports,O=a("c24f"),A={name:"addDialog",data:function(){return{service:{assignorId:"",createType:1,desc:"",details:[],innerCode:"",productType:"",userId:1},allTaskType:[],operatorList:[],ChannelList:[],rules:{innerCode:[{required:!0,message:"设备编号不能为空",trigger:"blur"}],productType:[{required:!0,message:"工单类型不能为空",trigger:"change"}],assignorId:[{required:!0,message:"运营人员不能为空",trigger:"change"}],desc:[{required:!0,message:"备注不能为空",trigger:"blur"}]},timer:null}},created:function(){},methods:Object(r["a"])({addDialogUnShow:function(){this.setAddDialogIsShow(!1),this.service.desc="",this.service.details=[],this.service.innerCode="",this.service.productType="",this.service.userId="",this.service.assignorId="",this.operatorList=[]},openFn:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.allTaskType[0]){e.next=6;break}return e.next=4,Object(f["j"])();case 4:a=e.sent,t.allTaskType=a.filter((function(t){return"补货工单"===t.typeName}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},createService:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(a){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=13;break}return e.prev=1,e.next=4,Object(f["a"])(t.service);case 4:t.$message.success("发布成功"),t.$parent.getTaskService(),t.setAddDialogIsShow(!1),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),500===e.t0.response.status&&t.$message.error(e.t0.response.data),console.dir(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},replenishment:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.$refs.ruleForm.validateField("innerCode",function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(a){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==a.trim()){e.next=4;break}return e.next=3,Object(O["b"])(t.service.innerCode.trim());case 3:t.operatorList=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),200)},getChannel:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t.$refs.ruleForm.validateField("innerCode",function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(a){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==a.trim()){e.next=5;break}return e.next=3,Object(f["c"])(t.service.innerCode.trim());case 3:t.ChannelList=e.sent,t.setChannelDialogIsShow(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})))()},upDataService:function(){var t=[];this.ChannelList.forEach((function(e){if(e.sku){var a={};a.channelCode=e.channelCode,a.expectCapacity=e.currentCapacity,a.skuId=e.sku.classId,a.skuName=e.sku.brandName,a.skuImage=e.sku.skuImage,t.push(a)}})),this.service.details=t}},Object(p["b"])("task",["setAddDialogIsShow","setChannelDialogIsShow","setInfoDialogIsShow"])),computed:Object(r["a"])({},Object(p["e"])("task",["addDialogIsShow","detailInfoList"])),components:{Dialog:d["a"],ChannelDialog:C},watch:{taskInfo:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.replenishment();case 2:t.service.desc=t.taskInfo.desc,t.service.innerCode=t.taskInfo.innerCode,t.service.productType=t.taskInfo.taskType.typeId,t.service.assignorId=t.taskInfo.assignorId,t.service.details=t.detailInfoList,console.log(t.service),t.setInfoDialogIsShow(!1),t.setAddDialogIsShow(!0);case 10:case"end":return e.stop()}}),e)})))()}},props:{taskInfo:{type:Object}}},j=A,T=(a("9729"),Object(m["a"])(j,v,w,!1,null,"53f3c5b4",null)),_=T.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Dialog",{attrs:{businessIsShow:t.infoDialogIsShow,title:"工单详情",isInfoDialog:t.isInfoDialog,removeDialog:t.isRemoveDialog,twoBtn:!1},on:{close:t.setInfoDialogUnShow,removeBtn:t.removeWork,infoBtn:t.againCreate}},[s("div",{staticClass:"task-status"},[s("div",{staticClass:"task-status-content"},["取消"===t.taskItem.taskStatus?s("img",{attrs:{src:a("54e0")}}):t._e(),"待办"===t.taskItem.taskStatus?s("img",{attrs:{src:a("ee24")}}):t._e(),"完成"===t.taskItem.taskStatus?s("img",{attrs:{src:a("1408")}}):t._e(),s("span",[t._v(t._s(t.taskItem.taskStatus))])]),s("div",["取消"===t.taskItem.taskStatus?s("img",{attrs:{src:a("619b")}}):t._e(),"待办"===t.taskItem.taskStatus?s("img",{attrs:{src:a("e86c")}}):t._e(),"完成"===t.taskItem.taskStatus?s("img",{attrs:{src:a("f9d7")}}):t._e()])]),s("div",{staticClass:"task-row"},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{offset:1}},[s("span",[t._v("设备编号: ")]),t._v(t._s(t.taskInfo.innerCode)+" ")]),s("el-col",{attrs:{offset:1}},[s("span",[t._v("创建日期: ")]),t._v(t._s(t._f("dayFormat")(t.taskInfo.createTime)))])],1),s("el-row",{attrs:{type:"flex"}},["待办"!==t.taskItem.taskStatus?s("el-col",{attrs:{offset:1}},[s("span",[t._v(t._s("取消"===t.taskItem.taskStatus?"取消日期":"完成日期")+": ")]),t._v(t._s(t._f("dayFormat")(t.taskInfo.updateTime)))]):t._e(),s("el-col",{attrs:{offset:1}},[s("span",[t._v("运营人员: ")]),t._v(t._s(t.taskInfo.userName))])],1),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{offset:1}},[s("span",[t._v("工单类型: ")]),t._v(t._s(t.taskInfo.taskType&&t.taskInfo.taskType.typeName))]),s("el-col",{attrs:{offset:1}},[s("span",[t._v("补货数量: ")]),s("span",{staticClass:"detail",on:{click:t.detailInfoFn}},[t._v("补货详情 ")])])],1),s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{offset:1}},[s("span",[t._v("工单方式: ")]),t._v(t._s(t.taskInfo.createType?"手动":"自动")+" ")]),s("el-col",{attrs:{offset:1}},[s("span",[t._v(" "+t._s("取消"===t.taskItem.taskStatus?"取消原因":"备注")+": ")]),t._v(t._s(t.taskInfo.desc))])],1)],1)]),t.taskId?s("DetailInfoDialog",{attrs:{taskId:t.taskId}}):t._e()],1)},F=[],R=a("5a0c"),U=a.n(R),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Dialog",{attrs:{businessIsShow:t.detailInfoIsShow,twoBtn:!1,title:"补货详情"},on:{close:t.setDetailInfoIsShow}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detailInfoList,height:"350",stripe:""}},[a("el-table-column",{attrs:{prop:"channelCode",label:"货道编号",width:"190"}}),a("el-table-column",{attrs:{prop:"skuName",label:"商品",width:"190"}}),a("el-table-column",{attrs:{prop:"expectCapacity",label:"补货数量",width:"190"}})],1)],1)},E=[],M={name:"DetailInfoDialog",data:function(){return{detailInfoList:[]}},created:function(){},methods:Object(r["a"])({getDetailInfo:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["d"])(t.taskId);case 3:t.detailInfoList=e.sent,t.setDetailInfoList(t.detailInfoList),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},Object(p["b"])("task",["setDetailInfoIsShow","setDetailInfoList"])),computed:Object(r["a"])({},Object(p["e"])("task",["detailInfoIsShow"])),props:{taskId:{trype:String,requestd:!0}},watch:{taskId:{immediate:!0,handler:function(){this.getDetailInfo()}}},components:{Dialog:d["a"]}},N=M,Q=Object(m["a"])(N,P,E,!1,null,"3ee1835b",null),Y=Q.exports,q={name:"InfoDialog",data:function(){return{taskInfo:{},taskId:""}},created:function(){},methods:Object(r["a"])({setInfoDialogUnShow:function(){this.setInfoDialogIsShow(!1)},getTaskInfo:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["f"])(t.taskItem.taskId);case 3:t.taskInfo=e.sent,t.taskId=t.taskInfo.taskId,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},detailInfoFn:function(){this.setDetailInfoIsShow(!0)},removeWork:function(){var t=this;this.$confirm("取消工单后,将不能恢复,是否确认取消?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["h"])(t.taskItem.taskId);case 2:return a=e.sent,e.next=5,t.$parent.searchFn();case 5:a&&(t.setInfoDialogIsShow(!1),t.$message({type:"success",message:"取消成功!"}));case 6:case"end":return e.stop()}}),e)})))).catch((function(e){var a;500===(null===(a=e.response)||void 0===a?void 0:a.status)?t.$message({type:"error",message:e.response.data}):t.$message({type:"info",message:"放弃取消成功"})}))},againCreate:function(){this.$emit("againCreate",this.taskInfo)}},Object(p["b"])("task",["setInfoDialogIsShow","setDetailInfoIsShow"])),computed:Object(r["a"])({isInfoDialog:function(){return"取消"===this.taskItem.taskStatus},isRemoveDialog:function(){return"待办"===this.taskItem.taskStatus}},Object(p["e"])("task",["infoDialogIsShow"])),watch:{taskItem:{deep:!0,immediate:!0,handler:function(){this.getTaskInfo()}}},props:{taskItem:{type:Object,required:!0}},components:{Dialog:d["a"],DetailInfoDialog:Y},filters:{dayFormat:function(t){return U()(t).format("YYYY.MM.DD hh:mm:ss")}}},K=q,G=(a("dd89"),Object(m["a"])(K,L,F,!1,null,"09c19802",null)),V=G.exports,z=a("3d7a"),W={name:"Business",data:function(){return{taskSearch:{pageIndex:1,pageSize:10,taskCode:"",status:"",isRepair:!1},taskList:{},addBtnStyle:{background:"linear-gradient(135deg,#ff9743,#ff5e20)"},businessBtnStyle:{background:"#fbf4f0",color:"#655b56"},flag:!0,typeList:[],taskItem:{},currentPageRecords:[],taskInfo:{},loading:!1}},created:function(){this.getTaskService(),this.getAllTaskStatus()},methods:Object(r["a"])({getTaskService:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Object(f["g"])(t.taskSearch);case 4:t.taskList=e.sent,a=[],t.taskList.currentPageRecords.forEach((function(e,s){a[s]={},a[s].pageIndex=s+1+10*(t.taskList.pageIndex-1),a[s].taskCode=e.taskCode,a[s].innerCode=e.innerCode,a[s].typeName=e.taskType.typeName,e.createType?a[s].createType="手动":a[s].createType="自动",a[s].taskStatus=e.taskStatusTypeEntity.statusName,a[s].userName=e.userName,a[s].createTime=U()(e.createTime).format("YYYY.MM.DD hh:mm:ss"),a[s].taskId=e.taskId})),t.currentPageRecords=a,t.flag=!0,t.loading=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},searchFn:function(t,e){this.taskSearch.pageIndex=1,this.taskSearch.taskCode=t,this.taskSearch.status=e,this.getTaskService()},getAllTaskStatus:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["b"])();case 3:t.typeList=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},businessDialogShow:function(){this.setBusinessIsShow(!0)},addDialogShow:function(){this.setAddDialogIsShow(!0)},getLastTaskService:function(){this.flag&&(this.flag=!1,this.taskSearch.pageIndex--,this.getTaskService())},getNextTaskService:function(){this.flag&&(this.flag=!1,this.taskSearch.pageIndex++,this.getTaskService())},getTaskInfo:function(t){this.taskItem=t,this.setInfoDialogIsShow(!0)},againCreate:function(t){this.taskInfo=t}},Object(p["b"])("task",["setBusinessIsShow","setAddDialogIsShow","setInfoDialogIsShow"])),computed:Object(r["a"])({listIsShow:function(){var t;return!(null!==(t=this.taskList.currentPageRecords)&&void 0!==t&&t[0])},lastDisabled:function(){return this.taskList.pageIndex<=1},rightDisabled:function(){return this.taskList.pageIndex==Math.ceil(this.taskList.totalCount/10)}},Object(p["e"])("task",["addDialogIsShow"])),components:{MyButton:c["a"],BusinessDialog:k,SearchBar:I["a"],AddDialog:_,FooterPage:z["a"],InfoDialog:V}},H=W,J=(a("933f"),Object(m["a"])(H,s,n,!1,null,"53650c2a",null));e["default"]=J.exports},bae4:function(t,e,a){},d189:function(t,e,a){},dd89:function(t,e,a){"use strict";a("8d2c")},e86c:function(t,e,a){t.exports=a.p+"static/img/daiban.834b274c.png"},ee24:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADQklEQVRIS72WWWyMURTHf3dGSOqB2pWSCGKZllRLPGjsW1GDIUhjQkwrliBiXhpUmkhFEEu0pUIaRAe1xFZUwoOgRKqWILZqa6vlQYPoXLn9Zjrzzfd12hLO4z3/c/73LPecK2hEZFqKDa91FoIRSNkPaO8zqUaIx0iuY6k9JrLzy8K5Eg0p5WLnYITMAsY3dhmfvggp3GLvgXtmeAORdDisRLbeAnIFYGkiiR/mBbGDz9/WCI+nNthWRyRdjjbICA+Ccc0k0MMllxA1DpHr+epX1BPVRdI24vxfk/g9K7IvNZP8kQWIXM5tIFfWXy1hGEy1Q7v2UFUBp05AWan+5rZYSJ4BXbvBp2o4Uwi3bwZhxHaRe2CVOqgj8hX+Tn1Nhg6HRakBg/JXUHIbLp4D6dXOhQUmTIb4BIjuGcDm5cCtG4GaSTFENYhG5FpwUdddmZuhYyf48B4KDkPpPejTF/oPhHYdNCefPsKjB/D0CcQOhtnzAjbpa4MjLxK5BycImbbIhvfXfV1OdubC82eQsxu6RsHcFIjuYd4f5a/hSD5UVULqUujVG5a79FhLixghXc4NINfrNOp2qiZxQyBlIVit4Zuwthby98PdO5Bsh4IjIXiRIWSq8wpSjjZ4Uqla5daTVH+EC2dB1VDpg0WRbcvSUhkqQhSriCpARul0QkD6RugerTd5+QI2ZcB8JySONDp8Uw6Z60DKUF2lkK4F34FWOo3Kszvd6KgxImWRlanVVy8/zIkmJoHd8WdEhR4tvUYik9TNmQ+jTaaQPyLViZGRmivbIBgTNHeLL8HRQyapM2uGaXZISjZGVPkG9mXrz+MSYEoQ9uwpOF2ox/iawdjecfGQuix8SzekzdkFd0tM2tvswbZsBVlbIaJ188hqvoF7Nfz8obezeGPMR5CCqbyrh9scUePqSlGohTaC1KlhqPqhi5dA/LCmUZXchL17QrFegodqHVnomlCHFgtMnwljJzY8htREuHwBTh4Hr2+y19OFrIk6onCLr3MXSBwFA2zaflKi9s/DMrh2Fd69NUbd0OLTovoPq9x/pf/yOQmO/59/t0KTLV3OGGCm9oGkH0hfkUQ1At8H0npMZOeF/UD+BpwnSWqJuP2NAAAAAElFTkSuQmCC"},f9d7:function(t,e,a){t.exports=a.p+"static/img/wancheng.3b5af41c.png"}}]);